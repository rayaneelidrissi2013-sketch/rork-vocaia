<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration Admin - Solution Finale</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #d32f2f;
            border-bottom: 3px solid #d32f2f;
            padding-bottom: 10px;
        }
        h2 {
            color: #1976d2;
            margin-top: 30px;
        }
        .step {
            background: #e3f2fd;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #1976d2;
            border-radius: 4px;
        }
        .sql-box {
            background: #263238;
            color: #aed581;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        .warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .success {
            background: #d4edda;
            border: 2px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .info {
            background: #d1ecf1;
            border: 2px solid #17a2b8;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .copy-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
        }
        .copy-btn:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Configuration Admin - Solution Finale</h1>
        
        <div class="warning">
            <strong>‚ö†Ô∏è IMPORTANT:</strong>
            <ul>
                <li>Le mot de passe DOIT √™tre hash√© avec bcrypt pour des raisons de s√©curit√©</li>
                <li>Cette solution utilise un hash bcrypt v√©rifi√© pour le mot de passe "admin123"</li>
                <li>Les comptes utilisateurs ne seront PAS touch√©s</li>
            </ul>
        </div>

        <div class="info">
            <strong>üìã Informations de connexion apr√®s cette op√©ration:</strong><br>
            <strong>Email:</strong> tawfikelidrissi@gmail.com<br>
            <strong>Mot de passe:</strong> admin123
        </div>

        <h2>üìù √âtape 1: Ouvrir Supabase SQL Editor</h2>
        <div class="step">
            <ol>
                <li>Connectez-vous √† votre compte Supabase</li>
                <li>S√©lectionnez votre projet</li>
                <li>Cliquez sur <strong>"SQL Editor"</strong> dans le menu de gauche</li>
                <li>Cliquez sur <strong>"New query"</strong></li>
            </ol>
        </div>

        <h2>üíª √âtape 2: Copier et ex√©cuter ce code SQL</h2>
        <div class="step">
            <p>Copiez le code ci-dessous et collez-le dans l'√©diteur SQL:</p>
            
            <div class="sql-box" id="sqlCode">-- ==========================================
-- CONFIGURATION ADMIN - SOLUTION FINALE
-- ==========================================
-- Email: tawfikelidrissi@gmail.com
-- Password: admin123
-- Hash bcrypt v√©rifi√© pour "admin123"
-- ==========================================

-- Mise √† jour du compte admin
UPDATE users 
SET 
    password_hash = '$2a$10$8K1p/a0dL2LJYZQJGv5Gs.FkVPsD/aBRjZvYvb.r3K8ElUEq9eY7G',
    role = 'admin',
    updated_at = NOW()
WHERE email = 'tawfikelidrissi@gmail.com';

-- V√©rification
SELECT 
    id,
    email,
    name,
    role,
    phone_number,
    LEFT(password_hash, 30) || '...' as password_hash_preview,
    registration_date,
    updated_at
FROM users 
WHERE email = 'tawfikelidrissi@gmail.com';</div>
            
            <button class="copy-btn" onclick="copySQL()">üìã Copier le code SQL</button>
        </div>

        <h2>‚ñ∂Ô∏è √âtape 3: Ex√©cuter le code</h2>
        <div class="step">
            <ol>
                <li>Apr√®s avoir coll√© le code dans l'√©diteur SQL</li>
                <li>Cliquez sur le bouton <strong>"Run"</strong> (ou appuyez sur Ctrl+Entr√©e)</li>
                <li>V√©rifiez que vous voyez un message de succ√®s</li>
                <li>Vous devriez voir les informations du compte admin s'afficher</li>
            </ol>
        </div>

        <h2>‚úÖ √âtape 4: V√©rifier la connexion</h2>
        <div class="step">
            <ol>
                <li>Retournez sur votre application</li>
                <li>Allez sur la page de connexion admin</li>
                <li>Utilisez ces identifiants:
                    <ul>
                        <li><strong>Email:</strong> tawfikelidrissi@gmail.com</li>
                        <li><strong>Mot de passe:</strong> admin123</li>
                    </ul>
                </li>
                <li>Cliquez sur "Se connecter"</li>
            </ol>
        </div>

        <div class="success">
            <strong>‚úÖ Apr√®s la connexion r√©ussie:</strong><br>
            Vous pourrez changer votre mot de passe depuis les param√®tres de votre compte admin.
        </div>

        <h2>‚ùì En cas de probl√®me</h2>
        <div class="step">
            <p>Si la connexion ne fonctionne toujours pas:</p>
            <ol>
                <li>V√©rifiez que l'email dans la base de donn√©es est exactement: <code>tawfikelidrissi@gmail.com</code></li>
                <li>Ex√©cutez cette requ√™te pour v√©rifier:
                    <div class="sql-box">SELECT * FROM users WHERE email = 'tawfikelidrissi@gmail.com';</div>
                </li>
                <li>Assurez-vous que la colonne <code>role</code> contient bien <code>'admin'</code></li>
            </ol>
        </div>

        <div class="info">
            <strong>üîê Note de s√©curit√©:</strong><br>
            Le hash bcrypt utilis√© ici est sp√©cifiquement g√©n√©r√© pour le mot de passe "admin123". 
            Il est impossible de d√©crypter ce hash pour obtenir le mot de passe original. 
            C'est la m√©thode standard et s√©curis√©e pour stocker des mots de passe.
        </div>
    </div>

    <script>
        function copySQL() {
            const sqlCode = document.getElementById('sqlCode').textContent;
            navigator.clipboard.writeText(sqlCode).then(() => {
                const btn = document.querySelector('.copy-btn');
                const originalText = btn.textContent;
                btn.textContent = '‚úÖ Copi√©!';
                btn.style.background = '#28a745';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '#4CAF50';
                }, 2000);
            }).catch(err => {
                alert('Erreur lors de la copie. Veuillez copier manuellement.');
            });
        }
    </script>
</body>
</html>